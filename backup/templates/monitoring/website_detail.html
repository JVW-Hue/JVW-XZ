{% extends 'base.html' %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <!-- Header -->
    <div class="flex justify-between items-center mb-8" data-aos="fade-down">
        <div>
            <h1 class="text-4xl font-black text-gradient mb-2">{{ website.name }}</h1>
            <p class="text-xl text-gray-600">{{ website.url }}</p>
        </div>
        <a href="{% url 'dashboard' %}" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3 rounded-full font-semibold transition-all duration-300">
            <i class="fas fa-arrow-left mr-2"></i> Back to Dashboard
        </a>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-12">
        <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-100 card-hover" data-aos="fade-up" data-aos-delay="100">
            <div class="text-center">
                <div class="text-4xl font-black text-green-600 mb-2">{{ uptime_24h|floatformat:1 }}%</div>
                <div class="text-sm font-semibold text-gray-600 uppercase tracking-wide">24h Uptime</div>
            </div>
        </div>
        
        <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-100 card-hover" data-aos="fade-up" data-aos-delay="200">
            <div class="text-center">
                <div class="text-4xl font-black text-blue-600 mb-2">{{ uptime_7d|floatformat:1 }}%</div>
                <div class="text-sm font-semibold text-gray-600 uppercase tracking-wide">7d Uptime</div>
            </div>
        </div>
        
        <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-100 card-hover" data-aos="fade-up" data-aos-delay="300">
            <div class="text-center">
                <div class="text-4xl font-black text-purple-600 mb-2">{{ uptime_30d|floatformat:1 }}%</div>
                <div class="text-sm font-semibold text-gray-600 uppercase tracking-wide">30d Uptime</div>
            </div>
        </div>
        
        <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-100 card-hover" data-aos="fade-up" data-aos-delay="400">
            <div class="text-center">
                <div class="text-4xl font-black text-orange-600 mb-2">{{ avg_response_time }}ms</div>
                <div class="text-sm font-semibold text-gray-600 uppercase tracking-wide">Avg Response</div>
            </div>
        </div>
    </div>

    <!-- Recent Checks -->
    <div class="bg-white rounded-2xl shadow-xl border border-gray-100 mb-8" data-aos="fade-up" data-aos-delay="500">
        <div class="px-8 py-6 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-blue-50 rounded-t-2xl">
            <h2 class="text-2xl font-bold text-gray-900">Recent Checks</h2>
        </div>
        
        <div class="p-8">
            {% if recent_checks %}
                <div class="space-y-4">
                    {% for check in recent_checks %}
                        <div class="flex items-center justify-between p-4 rounded-xl {% if check.is_up %}bg-green-50{% else %}bg-red-50{% endif %}">
                            <div class="flex items-center space-x-4">
                                <div class="w-3 h-3 rounded-full {% if check.is_up %}bg-green-500{% else %}bg-red-500{% endif %}"></div>
                                <div>
                                    <div class="font-semibold {% if check.is_up %}text-green-800{% else %}text-red-800{% endif %}">
                                        {% if check.is_up %}Online{% else %}Offline{% endif %}
                                    </div>
                                    <div class="text-sm text-gray-600">{{ check.checked_at|date:"M d, Y H:i" }}</div>
                                </div>
                            </div>
                            <div class="text-right">
                                {% if check.response_time %}
                                    <div class="font-semibold text-gray-900">{{ check.response_time|floatformat:0 }}ms</div>
                                {% endif %}
                                {% if check.status_code %}
                                    <div class="text-sm text-gray-600">Status: {{ check.status_code }}</div>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="text-center py-12">
                    <div class="text-gray-500">No checks yet</div>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Incidents -->
    {% if incidents %}
    <div class="bg-white rounded-2xl shadow-xl border border-gray-100" data-aos="fade-up" data-aos-delay="600">
        <div class="px-8 py-6 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-red-50 rounded-t-2xl">
            <h2 class="text-2xl font-bold text-gray-900">Recent Incidents</h2>
        </div>
        
        <div class="p-8">
            <div class="space-y-4">
                {% for incident in incidents %}
                    <div class="p-4 rounded-xl bg-red-50 border border-red-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="font-semibold text-red-800">
                                    {% if incident.is_resolved %}Resolved Incident{% else %}Ongoing Incident{% endif %}
                                </div>
                                <div class="text-sm text-gray-600">Started: {{ incident.started_at|date:"M d, Y H:i" }}</div>
                                {% if incident.ended_at %}
                                    <div class="text-sm text-gray-600">Ended: {{ incident.ended_at|date:"M d, Y H:i" }}</div>
                                {% endif %}
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-semibold text-red-600">
                                    Duration: {{ incident.duration }}
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}